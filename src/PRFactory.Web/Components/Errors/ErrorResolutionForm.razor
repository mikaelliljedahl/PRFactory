@using PRFactory.Web.Models

<div class="card">
    <div class="card-header bg-success text-white">
        <h6 class="mb-0">
            <i class="bi bi-check-circle me-2"></i>
            Mark Error as Resolved
        </h6>
    </div>
    <div class="card-body">
        <EditForm Model="@Model" OnValidSubmit="HandleSubmit">
            <DataAnnotationsValidator />
            <ValidationSummary class="alert alert-danger" />

            <div class="mb-3">
                <label class="form-label">Resolved By</label>
                <InputText class="form-control" @bind-Value="Model.ResolvedBy" placeholder="Your name or email" />
                <div class="form-text">Optional: Who is marking this error as resolved</div>
            </div>

            <div class="mb-3">
                <label class="form-label">Resolution Notes</label>
                <InputTextArea class="form-control" rows="4" @bind-Value="Model.ResolutionNotes"
                              placeholder="Describe how the error was resolved, root cause, or any additional context..." />
                <div class="form-text">Optional: Notes about how the error was resolved</div>
            </div>

            <div class="d-flex justify-content-end gap-2">
                @if (OnCancel.HasDelegate)
                {
                    <button type="button" class="btn btn-secondary" @onclick="() => OnCancel.InvokeAsync()" disabled="@IsSubmitting">
                        Cancel
                    </button>
                }
                <button type="submit" class="btn btn-success" disabled="@IsSubmitting">
                    @if (IsSubmitting)
                    {
                        <span class="spinner-border spinner-border-sm me-1" role="status"></span>
                    }
                    else
                    {
                        <i class="bi bi-check-circle me-1"></i>
                    }
                    Mark as Resolved
                </button>
            </div>
        </EditForm>
    </div>
</div>
