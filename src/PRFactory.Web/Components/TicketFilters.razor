@using PRFactory.Domain.ValueObjects
@using PRFactory.Web.UI.Cards

<Card Title="Filters" Icon="funnel" AdditionalClass="shadow-sm mb-4">
    <div class="row g-3">
        <!-- State Filter -->
        <div class="col-md-4">
            <label for="stateFilter" class="form-label">State</label>
            <select id="stateFilter" class="form-select" @bind="SelectedState" @bind:after="InvokeFilterChanged">
                <option value="">All States</option>
                <option value="@WorkflowState.Triggered">Triggered</option>
                <option value="@WorkflowState.Analyzing">Analyzing</option>
                <option value="@WorkflowState.QuestionsPosted">Questions Posted</option>
                <option value="@WorkflowState.AwaitingAnswers">Awaiting Answers</option>
                <option value="@WorkflowState.AnswersReceived">Answers Received</option>
                <option value="@WorkflowState.Planning">Planning</option>
                <option value="@WorkflowState.PlanPosted">Plan Posted</option>
                <option value="@WorkflowState.PlanUnderReview">Plan Under Review</option>
                <option value="@WorkflowState.PlanApproved">Plan Approved</option>
                <option value="@WorkflowState.PlanRejected">Plan Rejected</option>
                <option value="@WorkflowState.Implementing">Implementing</option>
                <option value="@WorkflowState.ImplementationFailed">Implementation Failed</option>
                <option value="@WorkflowState.PRCreated">PR Created</option>
                <option value="@WorkflowState.InReview">In Review</option>
                <option value="@WorkflowState.Completed">Completed</option>
                <option value="@WorkflowState.Cancelled">Cancelled</option>
                <option value="@WorkflowState.Failed">Failed</option>
            </select>
        </div>

        <!-- Source Filter -->
        <div class="col-md-4">
            <label for="sourceFilter" class="form-label">Source</label>
            <select id="sourceFilter" class="form-select" @bind="SelectedSource" @bind:after="InvokeFilterChanged">
                <option value="">All Sources</option>
                <option value="@TicketSource.WebUI">Web UI</option>
                <option value="@TicketSource.Jira">Jira</option>
                <option value="@TicketSource.AzureDevOps">Azure DevOps</option>
                <option value="@TicketSource.GitHubIssues">GitHub Issues</option>
            </select>
        </div>

        <!-- Repository Filter -->
        <div class="col-md-4">
            <label for="repositoryFilter" class="form-label">Repository</label>
            <select id="repositoryFilter" class="form-select" @bind="SelectedRepositoryId" @bind:after="InvokeFilterChanged">
                <option value="">All Repositories</option>
                @if (Repositories != null)
                {
                    @foreach (var repo in Repositories)
                    {
                        <option value="@repo.Id">@repo.Name</option>
                    }
                }
            </select>
        </div>
    </div>

    <div class="row mt-3">
        <div class="col">
            <button class="btn btn-secondary btn-sm" @onclick="ClearFilters">
                <i class="bi bi-x-circle"></i> Clear Filters
            </button>
        </div>
    </div>
</Card>

