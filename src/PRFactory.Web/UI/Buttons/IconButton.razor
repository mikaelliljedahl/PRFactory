<button type="@ButtonType"
        class="@ButtonClass"
        disabled="@Disabled"
        title="@Tooltip"
        @onclick="HandleClick">
    <i class="bi bi-@Icon"></i>
    @if (!string.IsNullOrEmpty(Text))
    {
        <span class="ms-2">@Text</span>
    }
</button>

@code {
    [Parameter, EditorRequired] public string Icon { get; set; } = "";
    [Parameter] public string? Text { get; set; }
    [Parameter] public string? Tooltip { get; set; }
    [Parameter] public bool Disabled { get; set; }
    [Parameter] public ButtonVariant Variant { get; set; } = ButtonVariant.Primary;
    [Parameter] public ButtonSize Size { get; set; } = ButtonSize.Normal;
    [Parameter] public string ButtonType { get; set; } = "button";
    [Parameter] public EventCallback<MouseEventArgs> OnClick { get; set; }
    [Parameter] public string AdditionalClass { get; set; } = "";

    private string ButtonClass
    {
        get
        {
            var variant = Variant switch
            {
                ButtonVariant.Primary => "btn-primary",
                ButtonVariant.Secondary => "btn-secondary",
                ButtonVariant.Success => "btn-success",
                ButtonVariant.Danger => "btn-danger",
                ButtonVariant.Warning => "btn-warning",
                ButtonVariant.Info => "btn-info",
                ButtonVariant.Light => "btn-light",
                ButtonVariant.Dark => "btn-dark",
                ButtonVariant.OutlinePrimary => "btn-outline-primary",
                ButtonVariant.OutlineSecondary => "btn-outline-secondary",
                ButtonVariant.OutlineDanger => "btn-outline-danger",
                _ => "btn-primary"
            };

            var size = Size switch
            {
                ButtonSize.Small => "btn-sm",
                ButtonSize.Normal => "",
                ButtonSize.Large => "btn-lg",
                _ => ""
            };

            return $"btn {variant} {size} {AdditionalClass}".Trim();
        }
    }

    private async Task HandleClick(MouseEventArgs e)
    {
        if (!Disabled && OnClick.HasDelegate)
        {
            await OnClick.InvokeAsync(e);
        }
    }
}
