<button type="@ButtonType"
        class="@ButtonClass"
        disabled="@(IsLoading || Disabled)"
        @onclick="HandleClick">
    @if (IsLoading)
    {
        <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
        <span>@LoadingText</span>
    }
    else
    {
        @if (!string.IsNullOrEmpty(Icon))
        {
            <i class="bi bi-@Icon me-2"></i>
        }
        @if (!string.IsNullOrEmpty(Text))
        {
            <span>@Text</span>
        }
        @ChildContent
    }
</button>

@code {
    [Parameter] public string? Text { get; set; }
    [Parameter] public string? LoadingText { get; set; }
    [Parameter] public string? Icon { get; set; }
    [Parameter] public bool IsLoading { get; set; }
    [Parameter] public bool Disabled { get; set; }
    [Parameter] public ButtonVariant Variant { get; set; } = ButtonVariant.Primary;
    [Parameter] public ButtonSize Size { get; set; } = ButtonSize.Normal;
    [Parameter] public string ButtonType { get; set; } = "button";
    [Parameter] public EventCallback<MouseEventArgs> OnClick { get; set; }
    [Parameter] public RenderFragment? ChildContent { get; set; }
    [Parameter] public string AdditionalClass { get; set; } = "";

    private string ButtonClass
    {
        get
        {
            var variant = Variant switch
            {
                ButtonVariant.Primary => "btn-primary",
                ButtonVariant.Secondary => "btn-secondary",
                ButtonVariant.Success => "btn-success",
                ButtonVariant.Danger => "btn-danger",
                ButtonVariant.Warning => "btn-warning",
                ButtonVariant.Info => "btn-info",
                ButtonVariant.Light => "btn-light",
                ButtonVariant.Dark => "btn-dark",
                ButtonVariant.OutlinePrimary => "btn-outline-primary",
                ButtonVariant.OutlineSecondary => "btn-outline-secondary",
                ButtonVariant.OutlineDanger => "btn-outline-danger",
                _ => "btn-primary"
            };

            var size = Size switch
            {
                ButtonSize.Small => "btn-sm",
                ButtonSize.Normal => "",
                ButtonSize.Large => "btn-lg",
                _ => ""
            };

            return $"btn {variant} {size} {AdditionalClass}".Trim();
        }
    }

    private async Task HandleClick(MouseEventArgs e)
    {
        if (!IsLoading && !Disabled && OnClick.HasDelegate)
        {
            await OnClick.InvokeAsync(e);
        }
    }
}

public enum ButtonVariant
{
    Primary,
    Secondary,
    Success,
    Danger,
    Warning,
    Info,
    Light,
    Dark,
    OutlinePrimary,
    OutlineSecondary,
    OutlineDanger
}

public enum ButtonSize
{
    Small,
    Normal,
    Large
}
