@using PRFactory.Web.Models

@if (Events != null && Events.Any())
{
    <div class="timeline @AdditionalClass">
        @foreach (var evt in Events)
        {
            <div class="timeline-item @GetTimelineItemClass(evt.Severity)">
                <div class="timeline-marker @GetMarkerClass(evt.Severity)">
                    <i class="bi bi-@evt.Icon"></i>
                </div>
                <div class="timeline-content">
                    <div class="timeline-header">
                        <span class="timeline-title">@evt.EventType</span>
                        <span class="timeline-time text-muted">
                            <i class="bi bi-clock me-1"></i>
                            @evt.OccurredAt.ToString("MMM dd, yyyy HH:mm:ss", System.Globalization.CultureInfo.InvariantCulture)
                        </span>
                    </div>
                    <div class="timeline-body">
                        @evt.Description
                        @if (!string.IsNullOrEmpty(evt.TicketKey))
                        {
                            <div class="mt-2">
                                <span class="badge bg-light text-dark">
                                    <i class="bi bi-ticket-perforated me-1"></i>@evt.TicketKey
                                </span>
                            </div>
                        }
                    </div>
                    @if (ShowDetails && OnEventClick.HasDelegate)
                    {
                        <div class="timeline-footer">
                            <button type="button" class="btn btn-sm btn-outline-primary" @onclick="() => OnEventClick.InvokeAsync(evt)">
                                <i class="bi bi-eye me-1"></i>View Details
                            </button>
                        </div>
                    }
                </div>
            </div>
        }
    </div>
}
else
{
    <div class="text-center text-muted py-4">
        <i class="bi bi-calendar-x fs-1"></i>
        <p class="mt-2">No events to display</p>
    </div>
}
