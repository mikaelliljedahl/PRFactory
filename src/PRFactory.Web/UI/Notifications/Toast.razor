@namespace PRFactory.Web.UI.Notifications
@using PRFactory.Web.Services

@if (IsVisible)
{
    <div class="toast show @GetToastClass()" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header">
            @if (!string.IsNullOrEmpty(Icon))
            {
                <i class="bi bi-@Icon me-2"></i>
            }
            <strong class="me-auto">@Title</strong>
            @if (ShowTimestamp)
            {
                <small class="text-muted">just now</small>
            }
            @if (Dismissible)
            {
                <button type="button" class="btn-close" @onclick="OnDismiss" aria-label="Close"></button>
            }
        </div>
        @if (!string.IsNullOrEmpty(Message))
        {
            <div class="toast-body">
                @Message
            </div>
        }
        else if (ChildContent != null)
        {
            <div class="toast-body">
                @ChildContent
            </div>
        }
    </div>
}

@code {
    [Parameter] public string? Title { get; set; }
    [Parameter] public string? Message { get; set; }
    [Parameter] public ToastType Type { get; set; } = ToastType.Info;
    [Parameter] public string? Icon { get; set; }
    [Parameter] public bool Dismissible { get; set; } = true;
    [Parameter] public bool ShowTimestamp { get; set; } = false;
    [Parameter] public bool IsVisible { get; set; } = true;
    [Parameter] public EventCallback OnDismiss { get; set; }
    [Parameter] public RenderFragment? ChildContent { get; set; }

    private string GetToastClass()
    {
        return Type switch
        {
            ToastType.Success => "bg-success text-white",
            ToastType.Error => "bg-danger text-white",
            ToastType.Warning => "bg-warning",
            ToastType.Info => "bg-info text-white",
            ToastType.Primary => "bg-primary text-white",
            _ => ""
        };
    }
}
